---
layout: posttoc
title: "静态博客目录生成方案选择"
subtitle: "简约不简单"
background: '/img/bg-bagtravel.jpg'
published: false
imagefolder: ""
lastmodify: "2020-03-18"
tags: [搭建博客, TOC]
---

* toc
{:toc}

文章有目录才方便阅读，看着挺简单但其实需要考虑的因素不少，下面我们来一个个评估下。//TODO想要达到的效果？

#### Markdown内建目录

Markdown语法生成的<abbr title="Table of Contents">TOC</abbr>元素和结构是`<ul id="markdown-toc"><li><a id="markdown-toc-xxx">`，这就有几个问题：

1. 静态网站比如Jekyll，只有文章的正文是Markdown格式，其他公用部分是放在Layouts的，这就造成了几个问题：
   - 每一个.md文件都需要加这一行，尽管很少
   - TOC只能放在正文里并且位置固定，这样的目录意义不大。如果能放在正文两侧并且是`position:sticky`的效果还可以接受。尝试了下，没有成功:sweat_smile:
   - 后期维护困难，如果想调整每一个.md文件都要修改:scream:
2. 需要自己写些CSS改变外观；生成的HTML元素Hardcoded，如果有其他需求可以用JavaScript删除原来的元素再生成新的元素，这个就……

如果标题是多语言，有个严重的问题是目录里的链接会被URI编码，会造成一些的JS库无法工作。这个事情要各打五十大板，为什么这么说呢？

你说你Markdown（或者是Jekyll，到底是~谁？你给我站出来）编码干啥捏？就直接多语言字符输出，我们点链接的时候人浏览器知道编码！

你说你JS库没考虑到吧，`jQuery("#markdown%E5%86%85%E5%BB%BA%E7%9B%AE%E5%BD%95")`人jQuery要报错啊！用属性选择器就没问题`jQuery("[id='markdown%E5%86%85%E5%BB%BA%E7%9B%AE%E5%BD%95']")`

#### Jekyll Pure Liquid TOC [:link:](https://github.com/allejo/jekyll-toc)

生成TOC方案，本质还是生成Markdown无序列表语法

#### jQuery One Page Nav [:link:](https://github.com/davist11/jQuery-One-Page-Nav)

这个插件只管应用JS效果，你得自己准备目录内容。主要功能包含：

- 点击导航条目的时候平滑滚动
- 浏览的时候自动高亮当前导航条目

由于上面提到的原因，如果目录包含多语言，功能将失效。

#### Bootstrap Scrollspy [:link:](https://getbootstrap.com/docs/4.3/components/scrollspy/)

子目录缩进通过`margin-left`实现

#### Head5

标签云加了个配置`background: true | false`，应用颜色深浅到文字还是背景色，提交了Pull Request

# Jump1
#### Jump4